#include <stm32f031x6.h>
#include <stdlib.h>
#include <time.h>
#include "display.h"

// Colours
#define skyBlue    RGBToWord(44,235,235)
#define grassGreen RGBToWord(40,235,70)
#define soilBrown  RGBToWord(105,43,0)
#define sunYellow  RGBToWord(240,230,45)

// Function Signatures
void initClock(void);
void initSysTick(void);
void SysTick_Handler(void);
uint32_t millis(void);
void delay(volatile uint32_t dly);
void setupIO();
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py);
void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber);
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode);
int mvmt(uint16_t *, uint16_t *, uint16_t *, uint16_t *);
int hungerBar(int hngr, int moving);
int FunGame(uint16_t *x, uint16_t *y, uint16_t *oldx, uint16_t *oldy);
void updateDisplayTime(void);


volatile uint32_t milliseconds;

// Spudman Animations
const uint16_t spudman_R1[] = {27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,28510,28510,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,28510,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,28510,28510,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,40766,40766,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,40766,40766,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,0,0,0,0,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,0,0,0,0,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,0,0,0,0,0,0,0,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,};
const uint16_t spudman_R2[] = {27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,28510,28510,28510,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,28510,28510,28510,28510,28510,28510,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,0,0,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,27905,0,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,28510,28510,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,40766,40766,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,40766,40766,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,0,0,0,0,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,0,0,0,0,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,0,0,0,0,0,0,0,0,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,};
const uint16_t spudman_U1[] = {27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,28510,28510,28510,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,28510,28510,28510,28510,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,0,0,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,28510,28510,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,24438,24438,24438,24438,61185,61185,61185,61185,0,0,0,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,15437,15437,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,0,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,0,0,27905,27905,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,61185,61185,0,0,0,0,61185,61185,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,0,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,};
const uint16_t spudman_U2[] = {27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,28510,28510,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,28510,28510,28510,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,0,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,28510,28510,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,40766,40766,24438,24438,65374,65374,65374,65374,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,40766,40766,24438,24438,65374,65374,65374,65374,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,24438,24438,61185,61185,0,27905,27905,0,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,24438,24438,61185,61185,0,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,15437,15437,15437,15437,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,15437,15437,15437,15437,61185,61185,0,0,0,0,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,0,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,61185,61185,0,0,0,0,0,0,61185,61185,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,0,27905,27905,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,};
const uint16_t spudman_D1[] = {27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,28510,28510,28510,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,28510,28510,28510,28510,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,0,0,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,28510,28510,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,40766,40766,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,24438,24438,24438,24438,61185,61185,61185,61185,0,0,0,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,0,0,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,0,0,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,15437,15437,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,0,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,0,0,0,0,0,0,0,0,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,0,0,27905,27905,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,0,0,0,0,0,0,0,0,65374,65374,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,61185,61185,0,0,0,0,0,0,61185,61185,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,0,27905,27905,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,29202,29202,29202,29202,61185,61185,0,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,29202,29202,29202,29202,61185,61185,0,27905,27905,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,};
const uint16_t spudman_D2[] = {27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,28510,28510,28510,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,28510,28510,28510,28510,28510,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,0,0,28510,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,28510,28510,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,28510,28510,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,40766,40766,24438,24438,65374,65374,65374,65374,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,61185,61185,24438,24438,24438,24438,24438,24438,40766,40766,24438,24438,65374,65374,65374,65374,24438,24438,24438,24438,24438,24438,61185,61185,61185,61185,0,27905,27905,27905,27905,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,24438,24438,61185,61185,0,27905,27905,0,0,0,61185,61185,24438,24438,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,24438,24438,61185,61185,0,0,0,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,61185,61185,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,24438,24438,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,24438,24438,65374,65374,40766,40766,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,65374,15437,15437,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,0,0,65374,65374,40766,40766,65374,65374,15437,15437,15437,15437,61185,61185,0,0,61185,61185,61185,61185,65374,65374,65374,65374,65374,65374,0,0,65374,65374,65374,65374,65374,65374,0,0,65374,65374,40766,40766,65374,65374,15437,15437,15437,15437,61185,61185,0,0,0,0,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,0,0,0,0,0,0,0,0,65374,65374,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,0,61185,61185,65374,65374,65374,65374,65374,65374,65374,65374,0,0,0,0,0,0,0,0,65374,65374,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,61185,61185,0,0,0,27905,27905,0,61185,61185,61185,61185,61185,61185,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,15437,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,0,0,0,0,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,61185,61185,0,0,0,0,61185,61185,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,0,27905,27905,0,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,61185,61185,0,27905,27905,0,61185,61185,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,29202,29202,29202,29202,61185,61185,0,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,29202,29202,29202,29202,61185,61185,0,27905,27905,0,61185,61185,29202,29202,29202,29202,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,0,61185,61185,61185,61185,61185,61185,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,0,27905,27905,0,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,};

// Sun Animations
const uint16_t sun_1[] = {26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,0,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,26095,56879,56879,56879,56879,56879,56879,0,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,0,0,0,56879,56879,56879,26095,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,0,0,0,0,56879,56879,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,56879,56879,56879,0,0,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,56879,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,};
const uint16_t sun_2[] = {26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,0,56879,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,56879,56879,0,56879,56879,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,56879,56879,0,56879,56879,56879,56879,56879,56879,26095,26095,56879,56879,56879,56879,26095,56879,56879,56879,26095,56879,56879,0,0,0,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,0,0,0,0,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,0,0,0,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,56879,56879,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,56879,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,26095,56879,56879,26095,26095,26095,26095,26095,26095,56879,26095,26095,26095,};

// Slug
const uint16_t slug_1[] = {0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61772,0,0,27905,27905,27905,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,0,26922,61772,0,27905,27905,0,0,61772,61772,0,27905,27905,27905,27905,27905,27905,27905,0,0,61772,0,0,27905,0,61772,26922,0,0,27905,27905,27905,27905,27905,27905,27905,27905,0,61772,61772,0,0,0,61772,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61772,61772,61772,61772,61772,61772,0,0,0,0,0,0,0,27905,27905,27905,27905,0,61772,25369,61772,25369,61772,61772,61772,61772,61772,61772,61772,61772,0,0,27905,27905,27905,0,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,0,0,27905,27905,0,0,26922,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,0,0,27905,27905,0,0,0,26922,26922,0,0,0,26922,26922,61772,61772,61772,61772,61772,0,27905,27905,27905,27905,0,0,0,0,27905,0,0,26922,26922,61772,61772,61772,61772,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,26922,26922,61772,61772,61772,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,0,0,0,0,0,0,};
const uint16_t slug_2[] = {27905,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61772,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,26922,61772,0,27905,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61772,0,0,27905,0,61772,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,0,61772,0,27905,27905,0,26922,0,27905,0,0,0,0,0,27905,27905,27905,27905,0,61772,0,0,0,0,61772,0,0,0,61772,61772,61772,0,0,27905,27905,27905,0,61772,61772,61772,61772,61772,61772,0,61772,61772,61772,61772,61772,61772,0,0,27905,27905,0,61772,25369,61772,25369,61772,61772,61772,61772,61772,61772,61772,61772,61772,61772,0,0,27905,0,0,61772,61772,61772,61772,61772,61772,61772,26922,26922,61772,61772,61772,61772,61772,0,27905,27905,0,26922,61772,61772,61772,61772,61772,0,0,26922,26922,61772,61772,61772,61772,0,27905,27905,0,0,0,26922,26922,0,0,0,0,0,26922,26922,61772,61772,61772,0,27905,27905,27905,27905,0,0,0,0,27905,27905,27905,0,0,0,0,0,0,0,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,27905,};

int main()
{
	// Current Stage
	int stage = 0;

	// Fun Bar
	int fun = 100;
	// Hunger
	int hunger = 50;
	int isDead;

	//position
	uint16_t x = 50;
	uint16_t y = 80;
	uint16_t oldx = x;
	uint16_t oldy = y;

	//mvmt
	int isMoving;
	srand(time(NULL));

	//timing
	initClock();
	initSysTick();
	setupIO();
	
	stage = 1;
	// Change backdrop
	fillRectangle(0,0,128,160,soilBrown);  

	//Gameplay starts:
	while(1)
	{
		updateDisplayTime();
		//stage = 1; // Debugging purposes

		if(stage == 0)
		{
			// Set Backdrop
			fillRectangle(0,0,128,160,skyBlue);         // Sky
			fillRectangle(0,60,128,160,soilBrown);      // Soil
			fillRectangle(0,45,128,23,grassGreen);      // Grass
			for (int i=8; i<120; i+=11) 
			{			    // Bumpy grass
				fillCircle(i,48,7,grassGreen);
				fillCircle(i,64,7,grassGreen);
			} // End for


			// Title
			printTextX2("Spudman!",5,5,0,skyBlue);

			while (1) 
			{
				putImage(104,10,20,20,sun_1,0,0);       // Sun
				putImage(56,120,34,40,spudman_D1,0,0);  // Spudman
				putImage(80,100,18,13,slug_1,0,0);		// Left slug
				putImage(20,90,18,13,slug_1,1,0);		// Right slug
				delay(100);
				putImage(104,10,20,20,sun_2,0,0);
				putImage(56,120,34,40,spudman_D2,0,0);
				putImage(80,100,18,13,slug_2,0,0);
				putImage(20,90,18,13,slug_2,1,0);
				delay(100);

				//Press left to change to pet stage
				if((GPIOB->IDR & (1<<5))==0)
				{
					stage = 1;
					break;
				}
			} // End while
		}
		else if(stage == 1)
		{
			// Change backdrop
			//fillRectangle(0,0,128,160,soilBrown);      // Soil
			
			//Press left to play dino game
			if((GPIOB->IDR & (1<<5))==0)
			{
				stage = 2;
			}
			//Pass x and y as pointers to mvmt function, returns either 1 if moving 0 if idle
			isMoving = mvmt(&x, &y, &oldx, &oldy);
		
			// if spud is moved hunger bar decreases 
			hunger = hungerBar(hunger, isMoving);
			//check if dead
			if (hunger == 0)
			{
				printText("Spuddy has starved",0,40,0,soilBrown);
				printText("to death",40,50,0,soilBrown);
				stage = 0;	
			}
		
		}
		else if(stage == 2)//Dino Game
		{

			//backdrop
			fillRectangle(0,0,128,160,soilBrown);      // Soil

			hunger = hunger + FunGame(&x, &y, &oldx, &oldy);

			stage = 1;
		}
		else if(stage == 3)
		{
			//nothing, placeholder for more games
		}
	}

	return 0;
}//end main

int hungerBar(int hngr, int moving)
{
	if(moving) // if spud is moved hunger bar decreases 
	{
		hngr = hngr - 1;
		printNumber(hngr,80,10,0,soilBrown);
		printText("Hunger:",10,10,0,soilBrown);
		return hngr;
	}
}

void initSysTick(void)
{
	SysTick->LOAD = 48000;
	SysTick->CTRL = 7;
	SysTick->VAL = 10;
	__asm(" cpsie i "); // enable interrupts
}
void SysTick_Handler(void)
{
	milliseconds++;
}
uint32_t millis(void)
{
	return milliseconds;
}
void initClock(void)
{
// This is potentially a dangerous function as it could
// result in a system with an invalid clock signal - result: a stuck system
        // Set the PLL up
        // First ensure PLL is disabled
        RCC->CR &= ~(1u<<24);
        while( (RCC->CR & (1 <<25))); // wait for PLL ready to be cleared
        
// Warning here: if system clock is greater than 24MHz then wait-state(s) need to be
// inserted into Flash memory interface
				
        FLASH->ACR |= (1 << 0);
        FLASH->ACR &=~((1u << 2) | (1u<<1));
        // Turn on FLASH prefetch buffer
        FLASH->ACR |= (1 << 4);
        // set PLL multiplier to 12 (yielding 48MHz)
        RCC->CFGR &= ~((1u<<21) | (1u<<20) | (1u<<19) | (1u<<18));
        RCC->CFGR |= ((1<<21) | (1<<19) ); 

        // Need to limit ADC clock to below 14MHz so will change ADC prescaler to 4
        RCC->CFGR |= (1<<14);

        // and turn the PLL back on again
        RCC->CR |= (1<<24);        
        // set PLL as system clock source 
        RCC->CFGR |= (1<<1);
}
void delay(volatile uint32_t dly)
{
	uint32_t end_time = dly + milliseconds;
	while(milliseconds != end_time)
		__asm(" wfi "); // sleep
}

void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber)
{
	Port->PUPDR = Port->PUPDR &~(3u << BitNumber*2); // clear pull-up resistor bits
	Port->PUPDR = Port->PUPDR | (1u << BitNumber*2); // set pull-up bit
}
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode)
{
	/*
	*/
	uint32_t mode_value = Port->MODER;
	Mode = Mode << (2 * BitNumber);
	mode_value = mode_value & ~(3u << (BitNumber * 2));
	mode_value = mode_value | Mode;
	Port->MODER = mode_value;
}
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py)
{
	// checks to see if point px,py is within the rectange defined by x,y,w,h
	uint16_t x2,y2;
	x2 = x1+w;
	y2 = y1+h;
	int rvalue = 0;
	if ( (px >= x1) && (px <= x2))
	{
		// ok, x constraint met
		if ( (py >= y1) && (py <= y2))
			rvalue = 1;
	}
	return rvalue;
}

void setupIO()
{
	RCC->AHBENR |= (1 << 18) + (1 << 17); // enable Ports A and B
	display_begin();
	pinMode(GPIOB,4,0);
	pinMode(GPIOB,5,0);
	pinMode(GPIOA,8,0);
	pinMode(GPIOA,11,0);
	enablePullUp(GPIOB,4);
	enablePullUp(GPIOB,5);
	enablePullUp(GPIOA,11);
	enablePullUp(GPIOA,8);
}
void updateDisplayTime(void)
{
	static uint32_t lastUpdate = 0;
	uint32_t elapsedTime = millis();

	if(elapsedTime - lastUpdate >= 1000)//update every second
	{
		lastUpdate = elapsedTime;
		static uint32_t seconds = 0;
		seconds++;

		//convert to HH:MS:SS format
		uint32_t hrs = (seconds / 3600) % 24;
		uint32_t mins = (seconds / 60) % 60;
		uint32_t secs = seconds % 60;

		//convert hrs mins and secs to characters and print
		printTime(hrs,10,140,0,soilBrown);
		printTime(mins,25,140,0,soilBrown);
		printTime(secs,40,140,0,soilBrown);
	}
}

//mega efficient random movement algorithm FAANG level.
int mvmt(uint16_t *x, uint16_t *y, uint16_t *oldx, uint16_t *oldy)
{
	// Movement Variables
	int isMoving = 0;   // (0=stationary) (1=moving)
	int random_mvmt;  // (0=down 1=up)  (2=left 3=right) !Default is 0!
	int random_mvmt_duration;
	
	// Movement
	random_mvmt = 0 + rand() % 4;//randomise direction
	random_mvmt_duration = 5 + rand() % 10;//randomise duration spent in that direction

	///////////////////////START MVMT IF SEQUENCE/////////////////////////
	// Move Down
	if (random_mvmt==0)
	{
		for(int i = 0;i < random_mvmt_duration;i++)
		{
			if (*y < 110)//checks if position is at edge of screen
			{
				*y = *y + 1;	
				fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx= *x; *oldy= *y;
				putImage(*x,*y,34,40,spudman_D1,0,0);
				delay(50);
				putImage(*x,*y,34,40,spudman_D2,0,0);
				delay(50);				
			}
		}//end if(duration)
		isMoving = 1;
		return isMoving;
	}//end if(direction)

	// Move Up
	else if (random_mvmt==1)
	{			
		for(int i = 0;i < random_mvmt_duration;i++)
		{
			if (*y > 20)//checks if position is at edge of screen
			{
				*y = *y - 1;
				fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx=*x; *oldy=*y;
				putImage(*x,*y,34,40,spudman_U1,0,0);
				delay(50);
				putImage(*x,*y,34,40,spudman_U2,0,0);
				delay(50);
			}
		}//end for(duration)
		isMoving = 1;
		return isMoving;
	}//end for(direction)

	// Move Left
	else if (random_mvmt==2)
	{			
		for(int i = 0; i < random_mvmt_duration;i++)
		{
			if (*x > 10)//checks if position is at edge of screen
			{
				*x = *x - 1;
				fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx=*x; *oldy=*y;
				putImage(*x,*y,34,40,spudman_R1,1,0);
				delay(50);
				putImage(*x,*y,34,40,spudman_R2,1,0);
				delay(50);
			}	
		}//end if(duration)	
		isMoving = 1;
		return isMoving;
	}//end if(direction)

	// Move right
	else if (random_mvmt==3) 
	{	
		for(int i = 0; i < random_mvmt_duration;i++)
		{				
			if (*x < 100)//checks if position is at edge of screen
			{
				*x = *x + 1;
				fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx=*x; *oldy=*y;
				putImage(*x,*y,34,40,spudman_R1,0,0);
				delay(50);
				putImage(*x,*y,34,40,spudman_R2,0,0);
				delay(50);
			}
		}//end if(duration)		
		isMoving = 1;
		return isMoving;		
	}//end if(direction)

	//Did not move(random_mvmt = 4)
	else
	{
		return isMoving;
	}//end else
	///////////////////////END MVMT IF SEQUENCE/////////////////////////
}//end mvmt function

int FunGame(uint16_t *x, uint16_t *y, uint16_t *oldx, uint16_t *oldy)
{
	int score = 0;
	int j = 1;

	while(1)
	{
		*x = 5;
		*y = 100;
		putImage(64,100,18,13,slug_1,0,0);
		printNumber(score,80,10,0,soilBrown);
		printText("score:",10,10,0,soilBrown);
		putImage(*x,*y,34,40,spudman_R1,0,0);

		for(int i = 0; *x < 100; i++)
		{
			*x = *x + j;
			fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx=*x; *oldy=*y;
			putImage(*x,*y,34,40,spudman_R1,0,0);
			putImage(64,100,18,13,slug_1,0,0);
			delay(50);
			putImage(*x,*y,34,40,spudman_R2,0,0);
			putImage(64,100,18,13,slug_2,0,0);
			delay(50);

			//Jump 
			if ((GPIOA->IDR & (1<<8))==0)  
			{
				for(int i = 0; i < 25;i++)
				{
					if(*x<100)
					{
						*x = *x + 1;
						*y = *y - 1;
					}
					fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx=*x; *oldy=*y;
					putImage(*x,*y,34,40,spudman_R1,0,0);
					putImage(64,100,18,13,slug_1,0,0);
					delay(50);
					putImage(*x,*y,34,40,spudman_R2,0,0);
					putImage(64,100,18,13,slug_2,0,0);
					delay(50);
				}
				for(int i = 0; i < 25;i++)
				{
					if(*x<100)
					{
						*x = *x + 1;
						*y = *y + 1;
					}
					fillRectangle(*oldx,*oldy,34,40,soilBrown); *oldx=*x; *oldy=*y;
					putImage(*x,*y,34,40,spudman_R1,0,0);
					putImage(64,100,18,13,slug_1,0,0);
					delay(50);
					putImage(*x,*y,34,40,spudman_R2,0,0);
					putImage(64,100,18,13,slug_2,0,0);
					delay(50);
				}
				delay(100);	
			}//end jump loop
			
			if (isInside(64,100,16,16,*x,*y) || isInside(64,100,16,16,*x+1,*y) || isInside(64,100,16,16,*x,*y+1) || isInside(64,100,16,16,*x+1,*y+1))
			{	
				return score;
			}
		}//end for(constant mvmt to the right)
		score += 1;
		if(score > 5)
		{
			j = 2;
		}
		else if(score > 10)
		{
			j = 3;
		}
		
	}//end while(1)
	
}//end FunGame()

//Jump if ((GPIOA->IDR & (1<<8))==0)  {if (*y>16)  {*y-=15;}}
///////////Old Stuff////////////
	// Movement Code
		// Move down
		//if ((GPIOA->IDR & (1<<11))==0) {if (y<140) {y+=1; isMoving=1; direction=0; invertH=0;}}
		// Move up
		//if ((GPIOA->IDR & (1<<8))==0)  {if (y>16)  {y-=1; isMoving=1; direction=1; invertH=0;}}
		// Move left
		//if ((GPIOB->IDR & (1<<5))==0)  {if (x>10)  {x-=1; isMoving=1; direction=2; invertH=1;}}
		// Move right
		//if ((GPIOB->IDR & (1<<4))==0)  {if (x<110) {x+=1; isMoving=1; direction=3; invertH=0;}}
	

		/* CODE FOR GLUG GLUG, IT CONTAINS CODE FOR COLLISION !!!
		// Now check for an overlap by checking to see if ANY of the 4 corners of deco are within the target area
		if (isInside(20,80,16,16,x,y) || isInside(20,80,16,16,x+12,y) || isInside(20,80,16,16,x,y+16) || isInside(20,80,16,16,x+12,y+16) )
		{	
		printTextX2("GLUG!", 10, 20, RGBToWord(0xff,0xff,0), 0); 
		}
		*/
	/*switch (stage) 
		{
			 // Main Menu
			case 0:
				// Set Backdrop
				fillRectangle(0,0,128,160,skyBlue);         // Sky
				fillRectangle(0,60,128,160,soilBrown);      // Soil
				fillRectangle(0,45,128,23,grassGreen);      // Grass
				for (int i=8; i<120; i+=11) 
				{			    // Bumpy grass
					fillCircle(i,48,7,grassGreen);
					fillCircle(i,64,7,grassGreen);
				} // End for


				// Title
				printTextX2("Spudman!",5,5,0,skyBlue);

				while (1) 
				{
					putImage(104,10,20,20,sun_1,0,0);       // Sun
					putImage(56,120,34,40,spudman_D1,0,0);  // Spudman
					putImage(80,100,18,13,slug_1,0,0);		// Left slug
					putImage(20,90,18,13,slug_1,1,0);		// Right slug
					delay(100);
					putImage(104,10,20,20,sun_2,0,0);
					putImage(56,120,34,40,spudman_D2,0,0);
					putImage(80,100,18,13,slug_2,0,0);
					putImage(20,90,18,13,slug_2,1,0);
					delay(100);
				} // End while

				stage = 9;

				break;
			// End stage 0

			// Pet Stage
			case 1:
				// Change backdrop
			

			// Summons SPUDMAN
			//putImage(64,80,16,16,spudman_D1,0,0);

				//Pass x and y as pointers to mvmt function, returns either 1 if moving 0 if idle
				isMoving = mvmt(&x, &y, &oldx, &oldy);
		
				// if spud is moved hunger bar decreases 
				if(isMoving)
				{
					hunger = hunger - 1;
					printNumber(hunger,80,10,255,0);
					printText("Hunger:",10,10,255,0);
		
					if (hunger == 0 && !isDead)
					{
						printText("Spuddy has starved",0,40,255,0);
						printText("to death",40,50,255,0);
						isDead = 1;	
						break;
					}
				} // End if

				break;
			// End stage 1
			
			// Do Nothing (testing purposes)
			case 9:

				break;


		if((GPIOB->IDR & (1<<5))==0)
		{
			hunger = hunger + FunGame(&x, &y, &oldx, &oldy);
		}*/